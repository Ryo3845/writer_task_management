<% provide(:title, "#{Date.today.strftime('%Y年%m月')}の案件一覧") %>

<div class="container loggedin-container">
  <h1><%= yield(:title) %></h1>

  <div id="projects-top">
    <%= form_with(model: @project,  local: true, html: { id: 'project-form'}) do |f| %>
      <h2>タスク登録</h2>

      <div class="project-form-group">
        <%= f.label :client, "クライアント" do %>
          クライアント<span>※</span>
        <% end %>
        <%= f.select :client, options_for_select([['--リストから選んでください--', ''], ['Ａ社', 'A社']]), {}, { class: 'form-control' } %>
      </div>

      <div class="project-form-group">
        <%= f.label :title, "案件名" do %>
          案件名（キーワードなど）<span>※</span>
        <% end %>
        <%= f.text_field :title, placeholder: "案件名", required: true, class: 'form-control'%>
      </div>

      <div class="project-form-group date-group structure-date">
        <div class="label-checkbox-container">
          <%= f.label :structure_deadline, "構成の期日" %>
          <div class="checkbox-wrapper">
            <%= f.check_box :structure_deadline_not_applicable, class: 'task-deadline-checkbox' %>
            <%= f.label :structure_deadline_not_applicable, "構成の作成なし", class: 'checkbox-label' %>
          </div>
        </div>
        <%= f.date_field :structure_deadline, class: 'form-control' %>
      </div>

      <div class="project-form-group date-group writing-date">
        <div class="label-checkbox-container">
          <%= f.label :writing_deadline, "原稿の期日" %>
          <div class="checkbox-wrapper">
            <%= f.check_box :writing_deadline_not_applicable, class: 'task-deadline-checkbox' %>
            <%= f.label :writing_deadline_not_applicable, "原稿の執筆なし", class: 'checkbox-label' %>
          </div>
        </div>
        <%= f.date_field :writing_deadline, class: 'form-control' %>
      </div>

      <div class="project-form-group date-group cms-date">
        <div class="label-checkbox-container">
          <%= f.label :cms_deadline, "CMS入稿の期日" %>
          <div class="checkbox-wrapper">
            <%= f.check_box :cms_deadline_not_applicable, class: 'task-deadline-checkbox' %>
            <%= f.label :cms_deadline_not_applicable, "CMS入稿なし", class: 'checkbox-label' %>
          </div>
        </div>
        <%= f.date_field :cms_deadline, class: 'form-control' %>
      </div>

      <div class="project-form-group date-group editor-date">
        <div class="label-checkbox-container">
          <%= f.label :cms_deadline, "編集業務・その他タスクの期日" %>
          <div class="checkbox-wrapper">
            <%= f.check_box :cms_deadline_not_applicable, class: 'task-deadline-checkbox' %>
            <%= f.label :cms_deadline_not_applicable, "編集業務・その他タスクなし", class: 'checkbox-label' %>
          </div>
        </div>
        <%= f.date_field :cms_deadline, class: 'form-control' %>
      </div>

      <div class="project-form-group">
        <%= f.label :status, "タスクのステータス" %>
        <%= f.select :status, options_for_select([
          ['--リストから選んでください--', ''],
          ['着手前', 'before-starting'],
          ['構成作成中', 'structure-create'],
          ['構成修正中', 'structure-collection'],
          ['原稿執筆中', 'writing-create'],
          ['原稿修正中', 'writing-collection'],
          ['CMS入稿中', 'cms-create'],
          ['CMS入稿記事修正中', 'cms-collection'],
          ['構成チェック中（編集業務）', 'structure-checking'],
          ['原稿チェック中（編集業務）', 'writing-checking'],
          ['入稿チェック中（編集業務）', 'cms-checking'],
          ['ライター対応中（編集業務）', 'writer-checking'],
          ['クライアント確認中', 'client-checking'],
          ]), {}, { id: 'status-list', class: 'form-control' } %>
      </div>

      <div class="project-form-group task-name">
        <%= f.label :name, "タスク名" %>
        <%= f.text_field :name, placeholder: "タスク名", class: 'form-control'%>
      </div>

      <div class="project-form-group">
        <%= f.label :compensation, "報酬" %>
        <%= f.text_field :compensation, inputmode: "numeric", placeholder: "報酬", class: 'form-control' %>
      </div>

      <div class="project-form-group">
        <%= f.label :url, "URL" %>
        <%= f.url_field :url, placeholder: "Googleドキュメントのリンクなど", class: 'form-control' %>
      </div>

      <div class="project-form-group">
        <%= f.label :note, "備考" %>
        <%= f.text_field :note, placeholder: "備考", class: 'form-control' %>
      </div>

      <small><span>※</span>は必須項目です</small><br>
      <small>※期日が決まっていない箇所は空欄で大丈夫です</small>
      <div class="project-form-group project-submit-group">
        <%= f.submit "登録", class: "btn btn-fill", id: "project-submit" %>
      </div>
    <% end %>
    <div>
      <table>
        <tr>
          <th>目標の売上</th>
          <th>今月の売上</th>
        </tr>
        <tr>
          <td></td>
          <td></td>
        </tr>
      </table>
    </div>
  </div>

<table id="projects-table">
  <thead>
    <tr>
      <th>編集</th>
      <th>クライアント</th>
      <th>案件名</th>
      <th>タスクのステータス</th>
      <th>タスク期日</th>
      <th>最終納期</th>
      <th>報酬</th>
      <th>URL</th>
      <th>作業時間</th>
      <th>時給</th>
      <th>備考</th>
      <th>タスク完了</th>
    </tr>
  </thead>
  <tbody>
    <% @projects.each do |p| %>
      <tr>
        <td></td>
        <td></td>
        <td><%= p.title %></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
    <% end %>
  </tbody>
</table>
